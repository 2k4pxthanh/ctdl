#include <bits/stdc++.h>
#define endl "\n"
using namespace std;
int V, E, M, s;
vector<bool> d;
vector<vector<int>> x;
vector<pair<int, int>> a;
void countdeg()
{
    for (int i = 1; i <= V; i++)
    {
        int k = 0;
        for (int v = 1; v <= V; v++)
            if (x[i][v] == 1)
                k++;
        a.push_back({k, i});
    }
}
bool cmp(pair<int, int> a, pair<int, int> b)
{
    return a.first > b.first;
}
int main()
{
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    int t;
    cin >> t;
    while (t--)
    {
        cin >> V >> E >> M;
        s = 0;
        x.clear();
        x.resize(V + 1, vector<int>(V + 1, 0));
        a.clear();
        d.clear();
        d.resize(V + 1, 0);
        for (int i = 0; i < E; i++)
        {
            int u, v;
            cin >> u >> v;
            x[u][v] = x[v][u] = 1;
        }
        countdeg();
        sort(a.begin(), a.end(), cmp);
        for (auto i : a)
        {
            int u = i.second;
            if (d[u])
                continue;
            d[u] = 1;
            s++;
            for (int v = 1; v <= V; v++)
                if (x[u][v] == 0)
                    d[v] = 1;
        }
        if (s <= M)
            cout << "YES\n";
        else
            cout << "NO\n";
    }
}
/* Do Xuan Huong
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@##################@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@#############################@@@@@@@@@@@@@@@@
@@@@@@@@@@@@&####################################@@@@@@@@@@@@
@@@@@@@@@@##########################################@@@@@@@@@
@@@@@@@@##############################################@@@@@@@
@@@@@@#################################################@@@@@@
@@@@@####################################################@@@@
@@@%#####################@@@@@@@@@@@######################@@@
@@@###################@@@@@@@@@@@@@@@@@####################@@
@@##################@@@@@@         @@@@@@##################@@
@@#################@@@@@             @@@@###################@
@@@@@@@@@@@@@@@@@@@@@@@@             @@@@@@@@@@@@@@@@@@@@@@@@
@                  &@@@@             @@@@           .......@@
@@                  @@@@@@         @@@@@@           .......@@
@@                    @@@@@@@@@@@@@@@@@            .......@@@
@@@                      @@@@@@@@@@@               ......@@@@
@@@@                                              ......@@@@@
@@@@@@                                           ......@@@@@@
@@@@@@@                                         .....@@@@@@@@
@@@@@@@@@                                     .....@@@@@@@@@@
@@@@@@@@@@@@                                ....@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@                         ....@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@%                .@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
*/
